/*!
 * Markdown
 * Released under MIT license
 * Copyright (c) 2009-2010 Dominic Baggott
 * Copyright (c) 2009-2010 Ash Berlin
 * Copyright (c) 2011 Christoph Dorn <christoph@christophdorn.com> (http://www.christophdorn.com)
 * Version: 0.6.0-beta1
 * Date: 2014-03-26T07:55Z
 */
!function(a){function b(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function c(){var a=require("util");return"Markdown.mk_block( "+a.inspect(this.toString())+", "+a.inspect(this.trailing)+", "+a.inspect(this.lineNumber)+" )"}function d(a){return a.split("\n").length-1}function e(a,b){function c(a){this.len_after=a,this.name="close_"+b}var d=a+"_state",e="strong"===a?"em_state":"strong_state";return function(f){if(this[d][0]===b)return this[d].shift(),[f.length,new c(f.length-b.length)];var g=this[e].slice(),h=this[d].slice();this[d].unshift(b);{var i=this.processInline(f.substr(b.length)),j=i[i.length-1];this[d].shift()}if(j instanceof c){i.pop();var k=f.length-j.len_after;return[k,[a].concat(i)]}return this[e]=g,this[d]=h,[b.length,b]}}function f(){n(this.tree)||this.tree.splice(1,0,{});var a=n(this.tree);return void 0===a.references&&(a.references={}),a}function g(a,b){b[2]&&"<"===b[2][0]&&">"===b[2][b[2].length-1]&&(b[2]=b[2].substring(1,b[2].length-1));var c=a.references[b[1].toLowerCase()]={href:b[2]};void 0!==b[4]?c.title=b[4]:void 0!==b[5]&&(c.title=b[5])}function b(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function c(){var a=require("util");return"Markdown.mk_block( "+a.inspect(this.toString())+", "+a.inspect(this.trailing)+", "+a.inspect(this.lineNumber)+" )"}var h={};h.mk_block=function(a,d,e){1===arguments.length&&(d="\n\n");var f=new String(a);return f.trailing=d,f.inspect=c,f.toSource=b,void 0!==e&&(f.lineNumber=e),f};var i=h.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};h.forEach=Array.prototype.forEach?function(a,b,c){return a.forEach(b,c)}:function(a,b,c){for(var d=0;d<a.length;d++)b.call(c||a,a[d],d,a)},h.isEmpty=function(a){for(var b in a)if(hasOwnProperty.call(a,b))return!1;return!0},h.extract_attr=function(a){return i(a)&&a.length>1&&"object"==typeof a[1]&&!i(a[1])?a[1]:void 0};var j={};j.inline_until_char=function(a,b){for(var c=0,d=[];;){if(a.charAt(c)===b)return c++,[c,d];if(c>=a.length)return[c,null,d];var e=this.dialect.inline.__oneElement__.call(this,a.substr(c));c+=e[0],d.push.apply(d,e.slice(1))}},j.subclassDialect=function(a){function b(){}function c(){}return b.prototype=a.block,c.prototype=a.inline,{block:new b,inline:new c}};var k=function(a){switch(typeof a){case"undefined":this.dialect=k.dialects.Gruber;break;case"object":this.dialect=a;break;default:if(!(a in k.dialects))throw new Error("Unknown Markdown dialect '"+String(a)+"'");this.dialect=k.dialects[a]}this.em_state=[],this.strong_state=[],this.debug_indent=""};k.dialects={};var l=k.mk_block=h.mk_block,i=h.isArray;k.parse=function(a,b){var c=new k(b);return c.toTree(a)},k.prototype.split_blocks=function(a){a=a.replace(/\r\n?/g,"\n");var b,c=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,e=[],f=1;for(null!==(b=/^(\s*\n)/.exec(a))&&(f+=d(b[0]),c.lastIndex=b[0].length);null!==(b=c.exec(a));)"\n#"===b[2]&&(b[2]="\n",c.lastIndex--),e.push(l(b[1],b[2],f)),f+=d(b[0]);return e},k.prototype.processBlock=function(a,b){var c=this.dialect.block,d=c.__order__;if("__call__"in c)return c.__call__.call(this,a,b);for(var e=0;e<d.length;e++){var f=c[d[e]].call(this,a,b);if(f)return(!i(f)||f.length>0&&!i(f[0])&&"string"!=typeof f[0])&&this.debug(d[e],"didn't return proper JsonML"),f}return[]},k.prototype.processInline=function(a){return this.dialect.inline.__call__.call(this,String(a))},k.prototype.toTree=function(a,b){var c=a instanceof Array?a:this.split_blocks(a),d=this.tree;try{for(this.tree=b||this.tree||["markdown"];c.length;){var e=this.processBlock(c.shift(),c);e.length&&this.tree.push.apply(this.tree,e)}return this.tree}finally{b&&(this.tree=d)}},k.prototype.debug=function(){var a=Array.prototype.slice.call(arguments);a.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,a),"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log.apply(null,a)},k.prototype.loop_re_over_block=function(a,b,c){for(var d,e=b.valueOf();e.length&&null!==(d=a.exec(e));)e=e.substr(d[0].length),c.call(this,d);return e},k.buildBlockOrder=function(a){var b=[];for(var c in a)"__order__"!==c&&"__call__"!==c&&b.push(c);a.__order__=b},k.buildInlinePatterns=function(a){var b=[];for(var c in a)if(!c.match(/^__.*__$/)){var d=c.replace(/([\\.*+?^$|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");b.push(1===c.length?d:"(?:"+d+")")}b=b.join("|"),a.__patterns__=b;var e=a.__call__;a.__call__=function(a,c){return void 0!==c?e.call(this,a,c):e.call(this,a,b)}};var m=h.forEach,n=h.extract_attr,l=h.mk_block,o=h.isEmpty,p=j.inline_until_char,q=/(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?/i.source,r={block:{atxHeader:function(a,b){var c=a.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(!c)return void 0;var d=["header",{level:c[1].length}];return Array.prototype.push.apply(d,this.processInline(c[2])),c[0].length<a.length&&b.unshift(l(a.substr(c[0].length),a.trailing,a.lineNumber+2)),[d]},setextHeader:function(a,b){var c=a.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(!c)return void 0;var d="="===c[2]?1:2,e=["header",{level:d}].concat(this.processInline(c[1]));return c[0].length<a.length&&b.unshift(l(a.substr(c[0].length),a.trailing,a.lineNumber+2)),[e]},code:function(a,b){var c=[],d=/^(?: {0,3}\t| {4})(.*)\n?/;if(!a.match(d))return void 0;a:for(;;){var e=this.loop_re_over_block(d,a.valueOf(),function(a){c.push(a[1])});if(e.length){b.unshift(l(e,a.trailing));break a}if(!b.length)break a;if(!b[0].match(d))break a;c.push(a.trailing.replace(/[^\n]/g,"").substring(2)),a=b.shift()}return[["code_block",c.join("\n")]]},horizRule:function(a,b){var c=a.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(!c)return void 0;var d=[["hr"]];if(c[1]){var e=l(c[1],"",a.lineNumber);d.unshift.apply(d,this.toTree(e,[]))}return c[3]&&b.unshift(l(c[3],a.trailing,a.lineNumber+1)),d},lists:function(){function a(a){return new RegExp("(?:^("+i+"{0,"+a+"} {0,3})("+f+")\\s+)|(^"+i+"{0,"+(a-1)+"}[ ]{0,4})")}function b(a){return a.replace(/ {0,3}\t/g,"    ")}function c(a,b,c,d){if(b)return void a.push(["para"].concat(c));var e=a[a.length-1]instanceof Array&&"para"===a[a.length-1][0]?a[a.length-1]:a;d&&a.length>1&&c.unshift(d);for(var f=0;f<c.length;f++){var g=c[f],h="string"==typeof g;h&&e.length>1&&"string"==typeof e[e.length-1]?e[e.length-1]+=g:e.push(g)}}function d(a,b){for(var c=new RegExp("^("+i+"{"+a+"}.*?\\n?)*$"),d=new RegExp("^"+i+"{"+a+"}","gm"),e=[];b.length>0&&c.exec(b[0]);){var f=b.shift(),g=f.replace(d,"");e.push(l(g,f.trailing,f.lineNumber))}return e}function e(a,b,c){var d=a.list,e=d[d.length-1];if(!(e[1]instanceof Array&&"para"===e[1][0]))if(b+1===c.length)e.push(["para"].concat(e.splice(1,e.length-1)));else{var f=e.pop();e.push(["para"].concat(e.splice(1,e.length-1)),f)}}var f="[*+-]|\\d+\\.",g=/[*+-]/,h=new RegExp("^( {0,3})("+f+")[ 	]+"),i="(?: {0,3}\\t| {4})";return function(f,i){function j(a){var b=g.exec(a[2])?["bulletlist"]:["numberlist"];return o.push({list:b,indent:a[1]}),b}var k=f.match(h);if(!k)return void 0;for(var l,n,o=[],p=j(k),q=!1,r=[o[0].list];;){for(var s=f.split(/(?=\n)/),t="",u="",v=0;v<s.length;v++){u="";var w=s[v].replace(/^\n/,function(a){return u=a,""}),x=a(o.length);if(k=w.match(x),void 0!==k[1]){t.length&&(c(l,q,this.processInline(t),u),q=!1,t=""),k[1]=b(k[1]);var y=Math.floor(k[1].length/4)+1;if(y>o.length)p=j(k),l.push(p),l=p[1]=["listitem"];else{var z=!1;for(n=0;n<o.length;n++)if(o[n].indent===k[1]){p=o[n].list,o.splice(n+1,o.length-(n+1)),z=!0;break}z||(y++,y<=o.length?(o.splice(y,o.length-y),p=o[y-1].list):(p=j(k),l.push(p))),l=["listitem"],p.push(l)}u=""}w.length>k[0].length&&(t+=u+w.substr(k[0].length))}if(t.length){var A=this.processBlock(t,[]),B=A[0];B.shift(),A.splice.apply(A,[0,1].concat(B)),c(l,q,A,u),"\n"===l[l.length-1]&&l.pop(),q=!1,t=""}var C=d(o.length,i);C.length>0&&(m(o,e,this),l.push.apply(l,this.toTree(C,[])));var D=i[0]&&i[0].valueOf()||"";if(!D.match(h)&&!D.match(/^ /))break;f=i.shift();var E=this.dialect.block.horizRule(f,i);if(E){r.push.apply(r,E);break}o[o.length-1].indent===f.match(/^\s*/)[0]&&m(o,e,this),q=!0}return r}}(),blockquote:function(a,b){var c=/(^|\n) +(\>[\s\S]*)/.exec(a);if(c&&c[2]&&c[2].length){var d=a.replace(/(^|\n) +\>/,"$1>");return b.unshift(d),[]}if(!a.match(/^>/m))return void 0;var e=[];if(">"!==a[0]){for(var f=a.split(/\n/),g=[],h=a.lineNumber;f.length&&">"!==f[0][0];)g.push(f.shift()),h++;var i=l(g.join("\n"),"\n",a.lineNumber);e.push.apply(e,this.processBlock(i,[])),a=l(f.join("\n"),a.trailing,h)}for(;b.length&&">"===b[0][0];){var j=b.shift();a=l(a+a.trailing+j,j.trailing,a.lineNumber)}var k=a.replace(/^> ?/gm,""),m=(this.tree,this.toTree(k,["blockquote"])),p=n(m);return p&&p.references&&(delete p.references,o(p)&&m.splice(1,1)),e.push(m),e},referenceDefn:function(a,b){var c=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*)\3|\((.*?)\)))?\n?/;if(!a.match(c))return void 0;var d=f.call(this),e=this.loop_re_over_block(c,a,function(a){g(d,a)});return e.length&&b.unshift(l(e,a.trailing)),[]},para:function(a){return[["para"].concat(this.processInline(a))]}},inline:{__oneElement__:function(a,b,c){var d,e;b=b||this.dialect.inline.__patterns__;var f=new RegExp("([\\s\\S]*?)("+(b.source||b)+")");if(d=f.exec(a),!d)return[a.length,a];if(d[1])return[d[1].length,d[1]];var e;return d[2]in this.dialect.inline&&(e=this.dialect.inline[d[2]].call(this,a.substr(d.index),d,c||[])),e=e||[d[2].length,d[2]]},__call__:function(a,b){function c(a){"string"==typeof a&&"string"==typeof e[e.length-1]?e[e.length-1]+=a:e.push(a)}for(var d,e=[];a.length>0;)d=this.dialect.inline.__oneElement__.call(this,a,b,e),a=a.substr(d.shift()),m(d,c);return e},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}<>\[\]()#\+.!\-]/,"\\":function(a){return this.dialect.inline.__escape__.exec(a)?[2,a.charAt(1)]:[1,"\\"]},"![":function(a){if(!(a.indexOf("(")>=0&&-1===a.indexOf(")"))){var b=a.match(new RegExp("^!\\[(.*?)][ \\t]*\\(("+q+")\\)([ \\t])*([\"'].*[\"'])?"))||a.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(b){b[2]&&"<"===b[2][0]&&">"===b[2][b[2].length-1]&&(b[2]=b[2].substring(1,b[2].length-1)),b[2]=this.dialect.inline.__call__.call(this,b[2],/\\/)[0];var c={alt:b[1],href:b[2]||""};return void 0!==b[4]&&(c.title=b[4]),[b[0].length,["img",c]]}return b=a.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),b?[b[0].length,["img_ref",{alt:b[1],ref:b[2].toLowerCase(),original:b[0]}]]:[2,"!["]}},"[":function V(a){for(var b=1,c=0;c<a.length;c++){var d=a.charAt(c);if("["===d&&b++,"]"===d&&b--,b>3)return[1,"["]}var e=String(a),h=p.call(this,a.substr(1),"]");if(!h[1]){var i=h[0]+1;return[i,a.charAt(0)+h[2].join("")]}var V,j,k=1+h[0],l=h[1];a=a.substr(k);var m=a.match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(m){var n=m[1].replace(/\s+$/,"");if(k+=m[0].length,n&&"<"===n[0]&&">"===n[n.length-1]&&(n=n.substring(1,n.length-1)),!m[3])for(var o=1,r=0;r<n.length;r++)switch(n[r]){case"(":o++;break;case")":0===--o&&(k-=n.length-r,n=n.substring(0,r))}return n=this.dialect.inline.__call__.call(this,n,/\\/)[0],j={href:n||""},void 0!==m[3]&&(j.title=m[3]),V=["link",j].concat(l),[k,V]}if(m=a.match(new RegExp("^\\(("+q+")\\)")),m&&m[1])return k+=m[0].length,V=["link",{href:m[1]}].concat(l),[k,V];if(m=a.match(/^\s*\[(.*?)\]/))return k+=m[0].length,j={ref:(m[1]||String(l)).toLowerCase(),original:e.substr(0,k)},V=["link_ref",j].concat(l),[k,V];if(m=e.match(/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/)){var j=f.call(this);return g(j,m),[m[0].length]}if(1===l.length&&"string"==typeof l[0]){var s=l[0].toLowerCase().replace(/\s+/," ");return j={ref:s,original:e.substr(0,k)},V=["link_ref",j,l[0]],[k,V]}return[1,"["]},"<":function(a){var b;return null!==(b=a.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?b[3]?[b[0].length,["link",{href:"mailto:"+b[3]},b[3]]]:"mailto"===b[2]?[b[0].length,["link",{href:b[1]},b[1].substr("mailto:".length)]]:[b[0].length,["link",{href:b[1]},b[1]]]:[1,"<"]},"`":function(a){var b=a.match(/(`+)(([\s\S]*?)\1)/);return b&&b[2]?[b[1].length+b[2].length,["inlinecode",b[3]]]:[1,"`"]},"  \n":function(){return[3,["linebreak"]]}}};r.inline["**"]=e("strong","**"),r.inline.__=e("strong","__"),r.inline["*"]=e("em","*"),r.inline._=e("em","_"),k.dialects.Gruber=r,k.buildBlockOrder(k.dialects.Gruber.block),k.buildInlinePatterns(k.dialects.Gruber.inline);var s=require("lodash"),t={mk_block:function(a,d,e){1===arguments.length&&(d="\n\n");var f=new String(a);return f.trailing=d,f.inspect=c,f.toSource=b,void 0!==e&&(f.lineNumber=e),f},isEmpty:function(a){for(var b in a)if(hasOwnProperty.call(a,b))return!1;return!0},extract_attr:function(a){return this.isArray(a)&&a.length>1&&"object"==typeof a[1]&&!this.isArray(a[1])?a[1]:void 0},create_attrs:function(){this.extract_attr(this.tree)||this.tree.splice(1,0,{});var a=this.extract_attr(this.tree);return void 0===a.references&&(a.references={}),a},create_reference:function(a,b){b[2]&&"<"===b[2][0]&&">"===b[2][b[2].length-1]&&(b[2]=b[2].substring(1,b[2].length-1));var c=a.references[b[1].toLowerCase()]={href:b[2]};void 0!==b[4]?c.title=b[4]:void 0!==b[5]&&(c.title=b[5])},invalidBoundary:function(a,b){if(a.wordBoundary||a.spaceBoundary){var c=b[b.length-1];if("string"==typeof c)return a.wordBoundary&&c.match(/(\w|\/)$/)?!0:a.spaceBoundary&&!c.match(/\s$/)?!0:void 0}}};t.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},t.forEach=Array.prototype.forEach?function(a,b,c){return a.forEach(b,c)}:function(a,b,c){for(var d=0;d<a.length;d++)b.call(c||a,a[d],d,a)},t.merge=s.merge;var u={name:"atxHeader",emitter:function(a,b){var c=a.match(/^(#{1,6})\s(.*?)\s*#*\s*(?:\n|$)/);if(c){var d=["header",{level:c[1].length}];return Array.prototype.push.apply(d,this.processInline(c[2])),c[0].length<a.length&&b.unshift(t.mk_block(a.substr(c[0].length),a.trailing,a.lineNumber+2)),[d]}},register:function(a){var b=this;b.dialect=a,a.block[b.name]=b.emitter}};module.exports=u;var v=["lang-auto","1c","actionscript","apache","applescript","avrasm","axapta","bash","brainfuck","clojure","cmake","coffeescript","cpp","cs","css","d","delphi","diff","xml","django","dos","erlang-repl","erlang","glsl","go","handlebars","haskell","http","ini","java","javascript","json","lisp","lua","markdown","matlab","mel","nginx","objectivec","parser3","perl","php","profile","python","r","rib","rsl","ruby","rust","scala","smalltalk","sql","tex","text","vala","vbscript","vhdl"],w={alias:"code",name:"code",start:/^\s*`{3}([^\n\[\]]+)?\n?([\s\S]*)?/gm,stop:"```",rawContents:!0,emitter:function(a,b){var c=this.dialect.options.code_default_language,d=this.dialect.options.code_languages?this.dialect.options.code_languages:v;b[1]&&-1!==d.indexOf(b[1])&&(c=b[1]);var e=c?{"class":c}:{};return["pre",["code",e,a.join(["\n"]).trim()]]},register:function(a){var b=this;b.dialect=a,a.replaceBlock({start:b.start,stop:b.stop,rawContents:b.rawContents,wordBoundary:b.wordBoundary,emitter:b.emitter,dialect:b.dialect})}};module.exports=w;var x={alias:"horizRule",name:"horizRule",pattern:/^(?:([\s\S]*?)\n)?[ \t]*([-=])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/,emitter:function(a,b){var c=a.match(this.pattern),d={};if(!c)return void 0;var e=[["hr",d]];if(c[1]){var f=this.mk_block(c[1],"",a.lineNumber);e.unshift.apply(e,this.toTree(f,[]))}return c[3]&&b.unshift(this.mk_block(c[3],a.trailing,a.lineNumber+1)),e},register:function(a){var b=this;b.dialect=a,a.block[b.name]=b.emitter}};module.exports=x;var y={alias:"blockquote",name:"blockquote",emitter:function(a,b){var c=/(^|\n) +(\>[\s\S]*)/.exec(a);if(c&&c[2]&&c[2].length){var d=a.replace(/(^|\n) +\>/,"$1>");return b.unshift(d),[]}if(!a.match(/^>/m))return void 0;var e=[];if(">"!==a[0]){for(var f=a.split(/\n/),g=[],h=a.lineNumber;f.length&&">"!==f[0][0];)g.push(f.shift()),h++;var i=t.mk_block(g.join("\n"),"\n",a.lineNumber);e.push.apply(e,this.processBlock(i,[])),a=t.mk_block(f.join("\n"),a.trailing,h)}for(;b.length&&">"===b[0][0];){var j=b.shift();a=t.mk_block(a+a.trailing+j,j.trailing,a.lineNumber)}var k=a.replace(/^> ?/gm,""),l=(this.tree,this.toTree(k,["blockquote"])),m=t.extract_attr(l);return m&&m.references&&(delete m.references,t.isEmpty(m)&&l.splice(1,1)),e.push(l),e},register:function(a){var b=this;b.dialect=a,a.block[b.name]=b.emitter}},z={name:"para",alias:"paragraph",emitter:function(a){return[["para"].concat(this.processInline(a))]},register:function(a){var b=this;b.dialect=a,a.registerBlock(b.name,b.emitter)}},A={start:'"',emitter:function(a,b,c){if(c){var d=c[c.length-1];if("string"==typeof d)return}if(a.length>2&&'"'===a.charAt(0)&&'"'===a.charAt(a.length-1)){var e=a.substr(1,a.length-2);if(-1===e.indexOf('"')&&-1===e.indexOf("\n"))return[a.length,["blockquote",e]]}},register:function(a){var b=this;b.dialect=a,a.inline[b.start]=function(a){return b.emitter(a)}}};module.exports=A;var B={start:["http","ftp","www"],pattern:/^((?:(?:https?|ftps?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.])(?:[^\s()<>]+|\([^\s()<>]+\))+(?:\([^\s()<>]+\)|[^`!()\[\]{};:'".,<>?«»“”‘’\s]))/gm,emitter:function(a){var b=a.match(this.pattern);if(b){var c=b[0],d=c;if(c.match(/\]\[\d$/))return;if(c.match(/\(http/))return;return c.match(/^www/)&&(c="http://"+c),[d.length,["a",{href:c},d]]}}},C={lexicons:[B],register:function(a){var b=this.lexicons;for(var c in b){var d=b[c];d.dialect=a,a.inline[d.start]=d.emitter}}};module.exports=C;var D={alias:"linebreak",start:"\n",emitter:function(){return[1,["linebreak"]]},register:function(a){var b=this;b.dialect=a,a.inline[b.start]=function(a){return b.emitter(a)}}},E={between:"*",wordBoundary:!0,emitter:function(a){return""!==a.toString()?["em"].concat(a):void 0}},F={between:"**",wordBoundary:!0,emitter:function(a){return""!==a.toString()?["strong"].concat(a):void 0}},G={between:"***",wordBoundary:!0,emitter:function(a){return""!==a.toString()?["strong",["em"].concat(a)]:void 0}},H={between:"//",wordBoundary:!0,emitter:function(a){return""!==a.toString()?["i"].concat(a):void 0}},I={between:"__",wordBoundary:!0,emitter:function(a){return""!==a.toString()?["ins"].concat(a):void 0}},J={between:"~~",wordBoundary:!0,emitter:function(a){return""!==a.toString()?["del"].concat(a):void 0}},K={alias:"inline_emphasis",lexicons:[G,F,E,H,I,J],register:function(a){this.lexicons;for(var b in this.lexicons){var c=this.lexicons[b];c.dialect=a,a.inlineBetween({between:c.between,wordBoundary:c.wordBoundary,emitter:c.emitter})}}},L={esc:[/^(\s*(?:Esc|Escape|退出)[键符]?\s*)$/i,"Esc",{"class":"modifier-key esc"}],f1f12:function(a){var b=a.match(/^(\s*(F1[0-2]|F[1-9])[键符]?\s*)$/i);if(b){var c=[{"class":"modifier-key function "+b[0].toLowerCase().trim()},b[0].toUpperCase().trim()];return c}},fn:[/^(\s*(?:Fn|功能)[键符]?\s*)$/i,"Fn",{"class":"modifier-key function fn"}],"print-screen":[/^(\s*(?:Print|Print\s*Screen|Prnt\s*Scrn|打印|打印屏幕|截屏)[键符]?\s*)$/i,"Print Screen",{"class":"modifier-key print-screen"}],"sys-req":[/^(\s*(?:System\s*Request|Sys\s*Req|Sys|System|系统)[键符]?\s*)$/i,"Sys Req",{"class":"modifier-key sys-req"}],"scroll-lock":[/^(\s*(?:Scroll|Scroll\s*Lock|Scr\s*Lock|Scr\s*Lck|Scr\s*Lk|滚屏|滚屏锁定)[键符]?\s*)$/i,"Scroll Lock",{"class":"modifier-key scroll-lock"}],pause:[/^(\s*(?:Pause|Break|暂停)[键符]?\s*)$/i,"Pause/Break",{"class":"modifier-key pause-break"}],"number-lock":[/^(\s*(?:Number\s*Lock|Num\s*Lock|Num\s*Lck|Num\s*Lk|数字锁定)[键符]?\s*)$/i,"Num Lock",{"class":"modifier-key num-lock"}],insert:[/^(\s*(?:Insert|Ins|插入)[键符]?\s*)$/i,"Insert",{"class":"modifier-key insert"}],"delete":[/^(\s*(?:Delete|Del|删除)[键符]?\s*)$/i,"Delete",{"class":"modifier-key delete"}],home:[/^(\s*Home[键符]?\s*)$/i,"Home",{"class":"modifier-key home"}],end:[/^(\s*End[键符]?\s*)$/i,"End",{"class":"modifier-key end"}],"page-up":[/^(\s*(?:Page\s*Up|Pg\s*Up|上翻页|上页)[键符]?\s*)$/i,"Page Up",{"class":"modifier-key page-up"}],"page-down":[/^(\s*(?:Page\s*Down|Pg\s*Down|下翻页|下页)[键符]?\s*)$/i,"Page Down",{"class":"modifier-key page-down"}],tab:[/^(\s*(?:Tab|制表|表格|[↔⇄↹⇋⇌])[键符]?\s*)$/i,"Tab",{"class":"modifier-key tab"}],capslock:[/^(\s*(?:大小写|大小写切换|大小写锁定|Caps|Caps\s*Lock)[键符]?\s*)$/i,"Caps Lock",{"class":"modifier-key caps-lock"}],shift:[/^(\s*(?:Shift|换挡)[键符]?\s*)$/i,"Shift",{"class":"modifier-key shift"}],space:[/^(\s*(?:Space|Space\s*Bar|空格|_{3,})[键符]?\s*)$/i,"Space",{"class":"modifier-key space"}],"space-blank":[/^(\s+)$/i,"Space",{"class":"modifier-key space"}],backspace:[/^(\s*(?:Backspace|回退|退格)[键符]?\s*)$/i,"Backspace",{"class":"modifier-key backspace"}],enter:[/^(\s*(?:Enter|Return|回车|换行)[键符]?\s*)$/i,"Enter",{"class":"modifier-key enter"}],"windows-ctrl":[/^(\s*(?:Ctrl|Control|控制)[键符]?\s*)$/i,"Ctrl",{"class":"modifier-key win-ctrl"}],"windows-alt":[/^(\s*(?:Alt|切换)[键符]?\s*)$/i,"Alt",{"class":"modifier-key win-alt"}],"windows-start":[/^(\s*(?:Windows|Win|Start|开始|Windows命令|Win命令)[键符]?\s*)$/i,"Windows",{"class":"modifier-key win-start"}],"windows-menu":[/^(\s*(?:Menu|菜单)[键符]?\s*)$/i,"Menu",{"class":"modifier-key win-menu"}],"mac-command":[/^(\s*(?:Command|Apple|Apple\s*Key|Mac命令|苹果命令|苹果|\\u2318)[键符]?\s*)$/i,"Command",{"class":"modifier-key mac-command"}],"mac-option":[/^(\s*(?:Option|选项|\\u2325)[键符]?\s*)$/i,"Option",{"class":"modifier-key mac-option"}],"arrow-left":[/^(\s*(?:<<+|<[\-=]+)\s*|(?:\s*左(?:箭头|方向)?[键符]?\s*)|\s*Left[\s\-_]?(?:Arrow)?[键符]?\s*|\s*[《«←⇦↤⇤⇐⇠]+\s*)$/i,"←",{"class":"modifier-key arrow-left arrow"}],"arrow-right":[/^(\s*(?:>>+|[\-=]+>)\s*|(?:\s*右(?:箭头|方向)?[键符]?\s*)|\s*Right[\s\-_]?(?:Arrow)?[键符]?\s*|\s*[》»→⇨↦⇥⇒⇢]+\s*)$/i,"→",{"class":"modifier-key arrow-right arrow"}],"arrow-up":[/^(\s*\^\^+\s*|(?:\s*上(?:箭头|方向)?[键符]?\s*)|\s*Up[\s\-_]?(?:Arrow)?[键符]?\s*|\s*[↑⇧⤒↥⇑⇡]+\s*)$/i,"↑",{"class":"modifier-key arrow-up arrow"}],"arrow-down":[/^(\s*vv+\s*|(?:\s*下(?:箭头|方向)?[键符]?\s*)|\s*Down[\s\-_]?(?:Arrow)?[键符]?\s*|\s*[↓⇩⤓↧⇓⇣]+\s*)$/i,"↓",{"class":"modifier-key arrow-down arrow"}]},M={modifier_key_patterns:L,start:"[[",stop:"]]",wordBoundary:!0,rawContents:!0,emitter:function(a){if(""!==a){var b=L,c=null;this.dialect.options.modifier_key_patterns&&(b=this.dialect.options.modifier_key_patterns);for(var d in b){var e=b[d];if("function"==typeof e){var f=e(a);if(f){c=f;break}}else if(a.match(e[0])){c=[e[2],e[1]];break}}return c=c?c:a.trim(),["kbd"].concat(c)}},register:function(a){var b=this;b.dialect=a,a.inlineBetween({start:b.start,stop:b.stop,rawContents:b.rawContents,wordBoundary:b.wordBoundary,emitter:b.emitter})}};module.exports=M;var N={start:"[",stop:"]",wordBoundary:!0,rawContents:!0,emitter:function(a){var b=this.dialect.options.emojiLookup;if(b){var c=b(a);return c?["img",c.attrs]:["span",{"class":"emoji not-found"},N.start+a+N.stop]}},register:function(a){var b=this;b.dialect=a,a.inlineBetween({start:b.start,stop:b.stop,rawContents:b.rawContents,wordBoundary:b.wordBoundary,emitter:b.emitter})}};module.exports=N;var O={start:"@",pattern:/^(@[a-zA-Z0-9\u4e00-\u9fa5][_.\-a-zA-Z0-9\u4e00-\u9fa5]{1,19})/m,wordBoundary:!0,emitter:function(a){var b=a.match(this.pattern);if(b){var c=b[1],d=this.dialect.options.mentionLookup;if(d){var e=d(c.substr(1));return e?[c.length,["a",{"class":"mention",href:e[0].permlink},c]]:[a.length,["span",{"class":"mention not-found"},a]]}}},register:function(a){var b=this;b.dialect=a,a.inline[b.start]=function(a){return b.emitter(a)}}};module.exports=O;var P=[u,w,y,z,A,C,D,K,M,N,O],l=k.mk_block=t.mk_block,Q=r,n=t.extract_attr,i=t.isArray,m=t.forEach,o=t.isEmpty,R=t.merge,S=t.invalidBoundary,T=function(a){this.block={},this.inline={__oneElement__:Q.inline.__oneElement__,__call__:Q.inline.__call__,__escape__:/^\\[`\*\/\_~\[\]]/,"]":function(){},"}":function(){},"\\":Q.inline["\\"],"`":Q.inline["`"]},this.options={lexicons:void 0,metionLookup:void 0},this.options=R(a||{},this.options);for(var b in P){var c=P[b];("undefined"==typeof this.options.lexicons||c.alias in this.options.lexicons)&&c.register(this)}};T.prototype={registerInline:function(a,b){this.inline[a]=b},inlineReplace:function(a){this.registerInline(a,function(){})},inlineRegexp:function(a){this.registerInline(a.start,function(b,c,d){if(!S(a,d)){a.matcher.lastIndex=0;var e=a.matcher.exec(b);if(e){var f=a.emitter.call(this,e);if(f)return[e[0].length,f]}}})},inlineBetween:function(a){var b=a.start||a.between,c=a.stop||a.between,d=b.length;this.registerInline(b,function(b,e,f){if(!S(a,f)){var g=b.indexOf(c,d);if(-1!==g){var h=b.slice(d,g);a.rawContents||(h=this.processInline(h));var i=a.emitter.call(this,h);return i?[g+c.length,i]:void 0}}})},registerBlock:function(a,b){this.block[a]=b},replaceBlock:function(a){this.registerBlock(a.start.toString(),function(b,c){a.start.lastIndex=0;var d=a.start.exec(b);if(d){var e,f=b.indexOf(d[0]),g=[],h=[],i=b.lineNumber;if(f>0){e=b.slice(0,f),i+=e.split("\n").length-1;var j=["p"];this.processInline(e).forEach(function(a){j.push(a)}),h.push(j)}d[2]&&c.unshift(k.mk_block(d[2],null,i+1)),i++;var l=!1;if(c.length>0)for(var m=0;m<c.length;m++)if(c[m].indexOf(a.stop)>=0){l=!0;break}if(!l)return void(d[2]&&c.shift());for(;c.length>0;){var n=c.shift(),o=n.lineNumber,p=("undefined"==typeof o?i:o)-i,q=n.indexOf(a.stop),r=n.slice(0,q),s=n.slice(q+a.stop.length);q>=0&&(l=!0);for(var t=1;p>t;t++)g.push("");if(i=o+n.split("\n").length-1,-1!==q){s&&c.unshift(k.mk_block(s.replace(/^\s+/,""))),g.push(r.replace(/\s+$/,""));break}g.push(n)}var u=a.emitter.call(this,g,d,this.options);return u&&h.push(u),h}})},postProcessText:function(a){this.emitters.push(a)},postProcessTag:function(a,b){this.on("parseNode",function(c){var d=c.node;d[0]===a&&(d[d.length-1]=b(d[d.length-1]))})}};var U=new T;k.dialects.Landmark=U,k.buildBlockOrder(U.block),k.buildInlinePatterns(U.inline),a.Landmark=U}(exports);